
<?php 

$oControl=new Control(); 

$id=(isset($_REQUEST['id'] ) ? $_REQUEST['id'] : '' );



if($id==""){

  echo '<script>window.history.back()</script>'; 

}

$decrip["cadena"]=$id; 

$id=$oControl->desencriptar($decrip); 



$oLista = new Lista('comprobante_items');

$oLista->setFiltro("idComprobante","=",$id);

$aComprobanteItems=$oLista->getLista();

unset($oLista);

$oData = new Data('comprobante',"idComprobante",$id);
$aComprobante=$oData->getDatos();
unset($oData);

// $oData = new Data('empresa',"idEmpresa",$aComprobante[0]["idEmpresa"]);
// $aEmpresa=$oData->getDatos();
// unset($oData);


$oItem=new Data("empresa","idEmpresa",$aComprobante['idEmpresa']); 
$aEmpresa=$oItem->getDatos(); 

$oItem=new Data("tipos_documento_contable","idTiposDocumento",$aComprobante['idTipo']); 
$aTipo=$oItem->getDatos(); 




$oLista = new Lista('tipos_documento_contable');
$tiposDocumento=$oLista->getLista();

unset($oLista);

// $oLista = new Lista('comprobante_items');
// $oLista->setFiltro("idComprobante","=",$id);
// $aComprobanteItems=$oLista->getLista();
// unset($oLista);



// $oItem=new Data("comprobante","idComprobante",$aDatos[0]["idComprobante"]); 
// $aComprobante=$oItem->getDatos(); 


$oLista = new Lista('departamento');
$aDepartamento=$oLista->getLista();
unset($oLista);




$oLista = new Lista('parametros_documentos');
$oLista->setFiltro('idEmpresa','=',$aComprobante["idEmpresa"]);
$oLista->setFiltro('tipo','=',$aComprobante["idTipo"]);
$parametrosDocumentos=$oLista->getLista();
unset($oLista);


$tipoFactura=0;


  $oLista = new Lista('factura_compra_comprobante');
  $oLista->setFiltro('idComprobante','=',$id);
  $oLista->setFiltro('estado','=',1);
  $facturaCompraComprobante=$oLista->getLista();
  unset($oLista);

if (!empty($facturaCompraComprobante)) {

  $oItem=new Data("factura_compra","idFacturaCompra",$facturaCompraComprobante[0]["idFacturaCompra"]);
  $factura=$oItem->getDatos();
  unset($oItem);

  $nroFactura=$factura["nroFactura"];
  $idFactura=$factura["idFacturaCompra"];
  $tipoFactura=1;

}
if (empty($facturaCompraComprobante)) {


    $oLista = new Lista('factura_venta_comprobante');
    $oLista->setFiltro('idComprobante','=',$id);
    $oLista->setFiltro('estado','=',1);
    $facturaVentaComprobante=$oLista->getLista();
    unset($oLista);

  if (!empty($facturaVentaComprobante)) {  

    $oItem=new Data("factura_venta","idFacturaVenta",$facturaVentaComprobante[0]["idFacturaVenta"]);
    $factura=$oItem->getDatos();
    unset($oItem);

    $nroFactura=$factura["nroFactura"];
    $idFactura=$factura["idFacturaVenta"];
    $tipoFactura=2;

    // print_r($factura);

  }
}




?>
<style type="text/css">
  .ui-menu.ui-widget.ui-widget-content.ui-autocomplete.ui-front{
    z-index: 9999 !important;
  }
</style>
<form enctype="multipart/form-data" id="frmGuardar">
  <input type="hidden" name="datos[idComprobante]" id="idComprobante" value="<?php echo $id; ?>">

<section class="section">

        <ul class="breadcrumb breadcrumb-style ">

          <li class="breadcrumb-item">

            <a href="<?php echo $URL; ?>">

              <i class="fas fa-home"></i></a>

          </li>

          <li class="breadcrumb-item">Comprobantes</li>

          <li class="breadcrumb-item">Crear comprobante</li>

        </ul>

        <div class="section-body">

          <div class="row">

            <div class="col-md-12 col-lg-12">

              <div class="card">

                <div class="card-header">

                  <h4>Información General</h4>

                </div>

                <div class="card-body">
                <fieldset class="border p-4">
                  <h4>Datos básicos</h4>
                <!-- <div class="card card-body"> -->

                  <div class="row">
                    <div class="col-md-3">
                      <div class="form-group">
                        <label>Empresa<span class="requerido">*</span>:</label>
                        <input type="text" class="form-control" name="datos[empresa]" id="empresa" required readonly value="<?php echo $aEmpresa['razonSocial'];?>">
                        <input type="hidden" class="form-control" name="datos[idEmpresa]" id="idEmpresa" required readonly value="<?php echo $aEmpresa['idEmpresa'];?>">
                      </div>
                    </div>
                    <?php if ($tipoFactura!=0) { ?>
                      
                    
                    <div class="col-md-3">
                      <div class="form-group">
                        <label class="negrita">Factura<span class="requerido">*</span>:</label>
                        <input type="text"  class="form-control " name="datos[factura]" id="factura" value="<?php echo $nroFactura;?>"  disabled readonly>
                        <input type="hidden"  class="form-control " name="datos[idFactura]" id="idFactura" value="<?php echo $idFactura;?>" >
                        <input type="hidden"  class="form-control " name="datos[tipoFactura]" id="tipoFactura" value="<?php echo $tipoFactura;?>" >
                      </div>
                    </div>

                  <?php } ?>

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Tipo<span class="requerido">*</span>:</label>

                        <select class="custom-select" name="datos[tipoDocumento]" id="tipoDocumento"   required>
          					      <option value="">Seleccione una opción</option>
          			                <?php foreach($tiposDocumento as $item){ ?>
          			                	<option  value='<?php echo $item["idTiposDocumento"]; ?>' <?php if($item["idTiposDocumento"]==$aComprobante["idTipo"]){echo 'selected';} ?>  ><?php echo $item["letra"].' - '.$item["descripcion"]; ?></option>
          					      	<?php } ?>
          					    </select>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="form-group">
                        <label class="negrita">Comprobante<span class="requerido">*</span>:</label>
                        <select class="custom-select" name="datos[comprobante]" id="comprobante"   required>
					                <option value="">Seleccione una opción</option>
                          <?php foreach($parametrosDocumentos as $itemP){ ?>
                          <option  value='<?php echo $itemP["comprobante"]; ?>' <?php if($itemP["comprobante"]==$aComprobante["comprobante"]){echo 'selected';} ?>  ><?php echo $itemP["comprobante"].' - '.$itemP["descripcion"]; ?></option>
                        <?php } ?>
					              </select>
                      </div>
                    </div>

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Fecha<span class="requerido">*</span>:</label>

                        <input type="date"  class="form-control datepicker" name="datos[fecha]" id="datos[fecha]" value="<?php echo $aComprobante['fecha'];?>" required readonly>

                      </div>

                    </div>

                    <div class="col-md-3" id="divNumeroComprobante">

                      <div class="form-group">

                        <label class="negrita">Comprobante No.<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control" name="datos[numeroComprobante]" id="numeroComprobante" value="<?php echo $aComprobante['numero'];?>" required>

                      </div>

                    </div>

                  </div>

              </fieldset>
            <!-- </div> -->
            <br>
                  <div id="tabla">
                  	<div class="col-md-12 col-lg-12" >

                      <table class="table table-striped mayusculas" id="tableProductos">

                        <thead>

                          <tr>

                            <th>Seq.</th>

                            <th>Cuenta<a href="javascript:void(0)" id="btnAgregarCuenta" class="btn btn-light"> <i class="fas fa-plus-circle" style="color:#0090E7;font-size: 22px;"></i> </a></th>

                            <th>Centro de costo</th>

                            <th>Subcentro de costo</th>

                            <th>Tercero<a href="javascript:void(0)" id="btnAgregarTercero" class="btn btn-light"> <i class="fas fa-plus-circle" style="color:#0090E7;font-size: 22px;"></i> </a></th>

                            <!-- <th>Suc.</th> -->

                            <th>Descripción</th>

                            <th>Base</th>

                            <th>Débito</th>

                            <th>crédito</th>
                            <th class="text-center">

                              <a href="javascript:void(0)" data-toggle="tooltip" id="agregar" data-placement="top" title="Agregar" class="btn btn-icon btn-sm btn-primary"><i class="fas fa-plus"></i></a>

                            </th>

                          </tr>

                        </thead>

                        <tbody>
                          <?php foreach($aComprobanteItems as $key=>$value){
                          // $codigoCuenta=explode("-", $value["cuenta"]); 
                          // $oItem=new Data("cuenta_contable","codigoCuenta",$codigoCuenta[0]);
                          // $cuentaC=$oItem->getDatos();
                          //  unset($oItem);

                            // print_r($value);
                            $oItem=new Data("cuenta_contable","idCuentaContable",$value["idCuentaContable"]); 
                            $cuentaC=$oItem->getDatos(); 
                            unset($oItem);


                            // $oItem=new Data("centro_costo","idCentroCosto",$value["idCentroCosto"]); 
                            // $centroC=$oItem->getDatos(); 
                            // unset($oItem);

                            // print_r($cuentaC);

                          // $nitT=explode("-", $value["tercero"]);
                          $oItem=new Data("tercero","idTercero",$value["idTercero"]);
                          $tercero=$oItem->getDatos();
                          $idTerc=$tercero["idTercero"];
                          $nombreT=$tercero["razonSocial"];
                          $nitTercero=$tercero["nit"];

                          $oItem=new Data("centro_costo","idCentroCosto",$value['idCentroCosto']);
                          $centroCos=$oItem->getDatos();
                          unset($oItem);


                          $oItem=new Data("subcentro_costo","idSubcentroCosto",$value['idSubcentroCosto']);
                          $subcentroCos=$oItem->getDatos();
                          unset($oItem);
                          // $idCentroCos=explode('-', $value['centroCosto']);  
                          
                          ?>
                            <tr>
                              <input type="hidden" class="form-control mayusculas naturaleza" name="item[<?php echo $key; ?>][naturaleza]" id="item[<?php echo $key; ?>][naturaleza]" value="<?php echo $cuentaC['naturaleza'];?>" required  >

                              <td><?php echo $key+1; ?></td>

                              <td><input type="text" name="item[<?php echo $key; ?>][cuentaContable]" id="item[<?php echo $key; ?>][cuentaContable]" class="form-control cuentaContable mayusculas" value="<?php echo $cuentaC['codigoCuenta'].' - '.$cuentaC['nombre'];?>" required placeholder="Cuenta">
                                <span name="item[0][letreroCuentaContable]" id="item[0][letreroCuentaContable]" class="ocultar letreroCuentaContable" style="color: red;">Cuenta no seleccionada correctamente</span>
                                <input type="hidden" name="item[<?php echo $key; ?>][idCuentaContable]" id="item[<?php echo $key; ?>][idCuentaContable]" class="form-control idCuentaContable" value="<?php echo $cuentaC['idCuentaContable'];?>"></td>

                              <td>
                                <?php if (!empty($centroCos["codigoCentroCosto"]) && empty(!$centroCos["centroCosto"])) { ?>
                                  

                                <input type="text" class="form-control centroCosto mayusculas" name="item[<?php echo $key; ?>][centroCosto]" id="item[<?php echo $key; ?>][centroCosto]" placeholder="centro costo" value="<?php echo $centroCos["codigoCentroCosto"].' - '.$centroCos["centroCosto"]; ?>">
                                
                                <input type="hidden" name="item[<?php echo $key; ?>][idCentroCosto]" id="item[<?php echo $key; ?>][idCentroCosto]" class="form-control idCentroCosto" value="<?php echo $centroCos["idCentroCosto"];?>"></td>

                                <td><input type="text" class="form-control subcentroCosto mayusculas" name="item[<?php echo $key; ?>][subcentroCosto]" id="item[<?php echo $key; ?>][subcentroCosto]" placeholder="subcentro costo" value="<?php echo $subcentroCos["codigoSubcentroCosto"].' - '.$subcentroCos["subcentroCosto"]; ?>">
                                
                                <input type="hidden" name="item[<?php echo $key; ?>][idSubcentroCosto]" id="item[<?php echo $key; ?>][idSubcentroCosto]" class="form-control idSubcentroCosto" value="<?php echo $subcentroCos["idSubcentroCosto"];?>"></td>
                                <?php } ?>
                                <?php if (empty($centroCos["codigoCentroCosto"]) && empty($centroCos["centroCosto"])) { ?>
                                <input type="text" class="form-control centroCosto mayusculas" name="item[<?php echo $key; ?>][centroCosto]" id="item[<?php echo $key; ?>][centroCosto]" placeholder="centro costo" value="" >
                                
                                <input type="hidden" name="item[<?php echo $key; ?>][idCentroCosto]" id="item[<?php echo $key; ?>][idCentroCosto]" class="form-control idCentroCosto" value="" ></td>


                                <td><input type="text" class="form-control subcentroCosto mayusculas" name="item[<?php echo $key; ?>][subcentroCosto]" id="item[<?php echo $key; ?>][subcentroCosto]" placeholder="subcentro costo" value="" >
                                
                                <input type="hidden" name="item[<?php echo $key; ?>][idSubcentroCosto]" id="item[<?php echo $key; ?>][idSubcentroCosto]" class="form-control idSubcentroCosto" value="" ></td>

                                <?php } ?>

                              

                              <!-- <td><input type="text" class="form-control subcentroCosto mayusculas" name="item[<?php echo $key; ?>][subcentroCosto]" id="item[<?php echo $key; ?>][subcentroCosto]"  required></td> -->

                              <td><input type="text" class="form-control  nit" name="item[<?php echo $key; ?>][nit]" id="item[<?php echo $key; ?>][nit]" placeholder="Tercero"  value="<?php echo $nitTercero.' - '.$nombreT;?>"><input type="hidden" name="item[<?php echo $key; ?>][idTercero]" id="item[<?php echo $key; ?>][idTercero]" class="form-control idTercero" value="<?php echo $idTerc; ?>">
                                <input type="hidden" name="item[<?php echo $key; ?>][tipoTercero]" id="item[<?php echo $key; ?>][tipoTercero]" class="form-control tipoTercero" value="<?php echo $tipoT; ?>"><span name="item[0][letreroTercero]" id="item[0][letreroTercero]" class="ocultar letreroTercero" style="color: red;">Tercero no seleccionado correctamente</span></td>

                              <!-- <td><input type="text" class="form-control sucursal mayusculas" name="item[<?php echo $key; ?>][sucursal]" id="item[<?php echo $key; ?>][sucursal]"  required></td> -->

                              <td><input type="text" class="form-control  descripcion mayusculas" name="item[<?php echo $key; ?>][descripcion]" id="item[<?php echo $key; ?>][descripcion]" value="<?php echo $value['descripcion'];?>" placeholder="Descripción" required ></td>
                              
                              <td><input type="text" class="form-control  base moneda " name="item[<?php echo $key; ?>][base]" id="item[<?php echo $key;?>][base]"
                              value="<?php if($value['base']!=0){
                                // echo $value['base'];  
                               echo "$".number_format($value['base'],2,",",".");
                              }  ?>" placeholder="Base/cruce" ></td>

                              <?php if ($value["naturaleza"]=='debito') {
                                $debitoV="$".number_format($value['saldoDebito'],2,",",".");
                                $creditoV="";
                                $controlC="disabled";
                                $controlD="";
                              }
                              if ($value["naturaleza"]=='credito') {
                                $creditoV="$".number_format($value['saldoCredito'],2,",",".");
                                $debitoV="";
                                $controlD="disabled";
                                $controlC="";
                              } ?>
                              <td><input type="text" class="form-control moneda decimales debito mayusculas" name="item[<?php echo $key; ?>][debito]" id="item[<?php echo $key; ?>][debito]" value="<?php echo $debitoV;?>" placeholder="Débito"  <?php echo $controlD; ?> ></td>

                              <td><input type="text" class="form-control moneda decimales  credito mayusculas" name="item[<?php echo $key; ?>][credito]" id="item[<?php echo $key; ?>][credito]" value="<?php echo $creditoV;?>" placeholder="Crédito" <?php echo $controlC; ?>></td>
                          

<!-- <input type="text" class="form-control moneda  valor mayusculas" name="item[<?php echo $key; ?>][valor]" id="item[<?php echo $key; ?>][valor]" placeholder="Valor" required> -->
                              <td class="centrar">

                                <a href="javascript:void(0)" data-toggle="tooltip" data-placement="top" title="Eliminar" class="btn btn-icon btn-sm btn-danger eliminar"><i class="fas fa-trash"></i></a>

                              </td>

                            </tr>
                            <?php } ?>

                        </tbody>


                      </table>

                    </div>
                    
                    <br>
                  <fieldset class="border p-2">
                    <div class="form-group">
                      <h4>Observaciones</h4>
                      <textarea class="form-control" name="datos[obsevaciones]" id="datos[obsevaciones]"><?php echo $aComprobante["observaciones"]; ?></textarea>


                    </div>
                    <div class="form-group">

                        <label class="negrita">Adjuntar archivo:</label>

                        <div class="custom-file">

                          <input type="file" class="custom-file-input" id="file" name="file" >

                          <label class="custom-file-label" for="customFile">Seleccionar archivo</label>

                        </div>

                      </div>

                  </fieldset>


                <br>
                  <fieldset class="border p-2">
                      <div class="row">
                        <div class="col-md-4">
                          
                         	<div class="form-group">
                          		<label class="negrita">Débito:</label>
							</div>
                          
                        </div>
                        <div class="col-md-4">
                            <input type="text" class="form-control moneda" name="datos[totalDebito]" id="totalDebito" readonly placeholder="débido">
                         
                        </div>

                      </div>
                      <br>
                      <div class="row">
                        <div class="col-md-4">
                          <div class="form-group">

                           
                            <label class="negrita">Crédito:</label>

                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">

                            <input type="text" class="form-control moneda" name="datos[totalCredito]" id="totalCredito" readonly placeholder="crédito">

                          </div>
                        </div>
                    </div>
					<div class="row">
	                    <div class="col-md-4">
	                      <div class="form-group">

	                       
	                        <label class="negrita">Diferencia:</label>

	                      </div>
	                    </div>
	                    <div class="col-md-4">
	                      <div class="form-group">

	                        <input type="text" class="form-control moneda" name="datos[totalDiferencia]" id="totalDiferencia" readonly placeholder="Diferencia">

	                      </div>
	                    </div>
	                </div>


                    

                  </fieldset>

             <br>
                  </div> 

                  </div>
           

                <div class="card-footer text-right">

                    <a class="btn btn-info mr-1" id="btnGuardar">EDITAR</a>

                  </div>

            </div>

        </div>

    </div>

</section>

</form>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">RETENCIÓN</h5>
        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body">
        <form enctype="multipart/form-data" id="frmRetencion">
          <input type="hidden" name="index" id="index">

          <div class="form-group">
            <div class="form-group">
              <label >Porcentaje de la retención:</label>
              <input type="text" name="datos[porcentajeRetencion]" id="porcentajeRetencion" class="form-control decimales" placeholder="% de la retencion" required>
              
             
            </div>
          </div>

           <div class="form-group">
            <div class="form-group">
              <label >Base:</label>
              <input type="text" name="datos[baseModal]" id="baseModal" class="form-control  decimales" placeholder="base retencion" required>
              
             
            </div>
          </div>
         
         <div class="form-group">
            <div class="form-group">
              <label >Retención:</label>
              <input type="text" name="datos[retencionModal]" id="retencionModal" class="form-control"  required disabled>
              
             
            </div>
          
          </div>
          <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio"name="datos[dc]"  id="debito" value="debito" >
              <label class="form-check-label" for="debito">DEBITO</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="datos[dc]"   id="credito" value="credito">
              <label class="form-check-label"  for="credito">CREDITO</label>
            </div>
         
        </form>
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">CANCELAR</button> -->
        <button type="button" class="btn btn-primary" id="btnGuardarRetencion">GUARDAR</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade bd-example-modal-lg" id="modalTercero" tabindex="-1" role="dialog" aria-labelledby="modalTerceroLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTerceroLabel">TERCERO</h5>
        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body">
        <form enctype="multipart/form-data" id="frmTercero">
          <fieldset class="border p-4">
                  <h4>Datos básicos</h4>
                
                  <label class="negrita">Clasificación<span class="requerido">*</span>:</label>
                  <div class="row">
                    <!-- <div class="col-md-6"> -->
                      <!-- <div class="form-group"> -->
                        <div class="col-md-2">
                        <div class="form-group">
                          <input  type="checkbox" name="datos[checkCliente]" id="checkCliente" value="1">
                          <label class="form-check-label" for="checkCliente">CLIENTE</label>
                        </div>
                      </div>
                      <div class="col-md-2">
                        <div class="form-group">
                          <input class="form-check-input menu" type="checkbox" name="datos[checkProveedor]" id="checkProveedor" value="1">
                          <label class="form-check-label" for="checkProveedor">PROVEEDOR</label>
                        </div>
                      </div>
                      <div class="col-md-2">
                        <div class="form-group">
                          <input class="form-check-input menu" type="checkbox" name="datos[checkOtro]" id="checkOtro" value="1">
                          <label class="form-check-label" for="checkOtro">OTRO</label>
                        </div>
                      </div>
                    </div>

                  <div class="row">

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Tipo Persona<span class="requerido">*</span>:</label>

                        <select class="form-control" name="datos[tipoPersona]" id="datos[tipoPersona]" required>

                          <option value="">Seleccione una opción</option>

                          <option value="1">Persona Natural</option>

                          <option value="2">Persona Juridica</option>

                        </select>

                      </div>

                    </div>

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Nit<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control numero" name="datos[nit]" id="datos[nit]" required>

                      </div>

                    </div>
                    

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Digito Verificador<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control" maxlength="1" name="datos[digitoVerificador]" id="datos[digitoVerificador]" required>

                      </div>

                    </div>

                    <div class="col-md-3">

                      <div class="form-group">

                        <label class="negrita">Responsable IVA<span class="requerido">*</span>:</label>

                        <select class="form-control" name="datos[responsableIva]" id="datos[responsableIva]" required>

                          <option value="">Seleccione una opción</option>

                          <option value="1">Si</option>

                          <option value="2">No</option>

                        </select>

                      </div>

                    </div>

                  </div>

                  <div class="row">

                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Razon Social<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control" name="datos[razonSocial]" id="datos[razonSocial]" required>

                      </div>

                    </div>
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Nombre comercial<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control" name="datos[nombreComercial]" id="datos[nombreComercial]" required>

                      </div>

                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="negrita">Contacto:</label>
                        <input type="text" class="form-control" name="datos[contacto]" id="datos[contacto]" >
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="negrita">Email<span class="requerido">*</span>:</label>
                        <input type="email" class="form-control" name="datos[email]" id="datos[email]" required>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">

                        <label class="negrita">Telefono<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control numero" name="datos[telefono]" id="datos[telefono]" required>

                      </div>

                    </div>
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Celular<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control numero" name="datos[celular]" id="datos[celular]" required>

                      </div>

                    </div>


                  </div>
                  <div class="row">
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Dirección<span class="requerido">*</span>:</label>

                        <input type="text" class="form-control" name="datos[direccion]" id="datos[direccion]" required>

                      </div>

                    </div>
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Departamento<span class="requerido">*</span>:</label>

                        <select class="form-control" name="datos[idDepartamento]" id="datos[idDepartamento]" required>

                          <option value="">Seleccione una opción</option>

                          <?php foreach($aDepartamento as $item){ ?>

                          <option value='<?php echo $item["idDepartamento"]; ?>'><?php echo $item["nombre"]; ?></option>

                          <?php } ?>

                        </select>

                      </div>

                    </div>
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Ciudad<span class="requerido">*</span>:</label>

                        <select class="form-control" name="datos[idCiudad]" id="datos[idCiudad]" required>

                          <option value="">Seleccione una opción</option>

                          

                        </select>

                      </div>

                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Genero<span class="requerido">*</span>:</label>

                        <select class="form-control" name="datos[genero]" id="datos[genero]" required>

                          <option value="e">Empresa</option>
                          <option value="m">Masculino</option>
                          <option value="f">Femenino</option>

                          

                        </select>

                      </div>

                    </div>
                    
                    <div class="col-md-4">

                      <div class="form-group">

                        <label class="negrita">Periodo pago:</label>

                        <input type="text" class="form-control" name="datos[periodoPago]" id="datos[periodoPago]" >

                      </div>

                    </div>
                  </div>
              </fieldset>
            <!-- </div> -->
            <input type="hidden" name="datos[terceroEmpresa]" id="terceroEmpresa" value="<?php echo $_SESSION["idEmpresa"]; ?>">
        </form>
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">CANCELAR</button> -->
        <button type="button" class="btn btn-primary" id="btnGuardarTercero">GUARDAR</button>
      </div>
    </div>
  </div>
</div>





<div class="modal fade bd-example-modal-lg" id="modalCuenta" tabindex="-1" role="dialog" aria-labelledby="modalCuentaLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalCuentaLabel">CUENTA CONTABLE</h5>
        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body">
          <form enctype="multipart/form-data" id="frmGuardarCuentaContable">

          <input type="hidden" name="datos[idEmpresa]" id="idEmpresaCuenta" value="<?php echo $_SESSION['idEmpresa']; ?>">
    <br> <br>
  <table class="table" cellspacing="6" cellpadding="10">
    <tbody>
      <tr>
        <th><label class="negrita">Grupo</label></th>
        <input type="hidden" class="form-control idGrupo"  name="datos[idGrupo]" id="idGrupo" placeholder="Grupo">
        <td><input type="text" class="form-control grupo mayusculas"  name="datos[grupo]" id="grupo" placeholder="Grupo" required></td>
        
        
      </tr>
      <tr>
        <th><label class="negrita">Cuenta</label></th>
        <input type="hidden" class="form-control idCuenta"  name="datos[idCuenta]" id="idCuenta" placeholder="Cuenta">
        <td ><input type="text" class="form-control cuenta mayusculas"  name="datos[cuenta]" id="cuenta" placeholder="Cuenta" required></td>
        
      </tr>
      <tr>
        <th>
            <input type="hidden" name="datos[checksubcuenta]" id="checksubcuenta" value="0" >
            <input type="checkbox" name="datos[checksubcuenta]" id="checksubcuenta" value="1" >
            <label class="negrita">Subcuenta</label></th>
        <td style="display: none;" id="tdSubcuenta"></td>

        <td><input type="hidden" class="form-control idSubcuenta"  name="datos[idSubcuenta]" id="idSubcuenta" placeholder="subcuenta">
        <input type="text" class="form-control subcuenta mayusculas"  name="datos[codigoSubcuenta]" id="subcuenta" placeholder="Subcuenta" readonly disabled ></td>
        <td><input type="text" class="form-control mayusculas"  name="datos[subcuenta]" id="descripcionSubcuenta" placeholder="Descripción" readonly disabled></td>
      </tr>
      <tr >
        <th>
            <input type="hidden" name="datos[checkauxiliar]" id="checkauxiliar" value="0" >
            <input type="checkbox" name="datos[checkauxiliar]" id="checkauxiliar" value="1" readonly disabled ><label class="negrita">Auxiliares</label></th>
        <td><input type="number" class="form-control auxiliar"  name="datos[idAuxiliar]" id="idAuxiliar" placeholder="Código" readonly disabled></td>
            <input type="hidden" class="form-control cuentaAuxiliar"  name="datos[codigoAuxiliar]" id="cuentaAuxiliar" placeholder="cuentaAuxiliar" ></td>
        <td ><input type="text" class="form-control mayusculas nombreAuxiliar"  name="datos[auxiliar]" id="auxiliar" placeholder="Descripción" readonly ></td>
      </tr>
      <tr >
        <th>
            <input type="hidden" name="datos[checksubauxiliar]" id="checksubauxiliar" value="0">
            <input type="checkbox" name="datos[checksubauxiliar]" id="checksubauxiliar" value="1" readonly disabled>
            <input type="hidden" class="form-control idAuxiliar"  name="datos[idSubauxiliar]" id="idSubauxiliar" placeholder="cuentaAuxiliar" ></td>
            <label class="negrita">Subauxiliares</label></th>
        <td><input type="number" class="form-control cuentaSubauxiliar"  name="datos[cuentaSubauxiliar]" id="cuentaSubauxiliar" placeholder="Código" readonly ></td>
        
        <td ><input type="text" class="form-control nombresubaxiliar"  name="datos[subauxiliar]" id="subauxiliar" placeholder="Descripción" readonly ></td>
      </tr>
  </table>
  <br>
  <hr>
  <div class="row">
    <div class="col-md-3">
      <label>Detalles</label>
      <select class="form-control" name="datos[detalle]" id="detalle">
        <option value="1">No detalla</option>
        <option value="2">Por cobrar</option>
        <option value="3">Por pagar</option>
      </select>
    </div>
    <div class="col-md-3">
      <label>Tercero</label>
      <select class="form-control" name="datos[tercero]" id="tercero">
        <option value="1">Si tercero</option>
        <option value="2">No tercero</option>
        <option value="3" >Retención</option>
      </select>
    </div>
    <div class="col-md-2" id="divPorcentajeRetencion" style="display: none;">
      <label>% Retención</label>
      <input type="text" class="form-control decimales" name="datos[porcentajeRetencion]" id="porcentajeRetencion">
    </div>
    <div class="col-md-4">
      <input type="hidden" name="datos[checkcentrocosto]" id="checkcentrocosto" value="0">
      <input type="checkbox" name="datos[checkcentrocosto]" id="checkcentrocosto" value="1"><label>Centros de costo</label>
      
    </div>
  </div>
  <br>
      <div class="row">
        <div class="col-md-4">
          <label>Tipo cuenta</label>
          <select class="form-control" name="datos[tipoCuenta]">
            <option value="1">Activo</option>
            <option value="2">Pasivo</option>
            <option value="3">Patrimonio</option>
            <option value="4">Ingreso</option>
            <option value="5">Gasto</option>
            <option value="6">Costo</option>
            <option value="7">Orden</option>
          </select>
        </div>
        <div class="col-md-4">
          <label>Naturaleza</label>
          <select class="form-control" name="datos[naturaleza]">
            <option value="debito">Débito</option>
            <option value="credito">Crédito</option>
          </select>
        </div>
      </div>
      </form>
    </div>

      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">CANCELAR</button> -->
        <button type="button" class="btn btn-primary" id="btnGuardarCuentaContable">GUARDAR</button>
      </div>
    </div>
  </div>
</div>